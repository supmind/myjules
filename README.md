# MiniJules: 一个基于 Autogen 的多代理开发助手

MiniJules 是一个实验性项目，旨在构建一个能够自主理解和执行软件开发任务的多代理系统。它利用了 Microsoft 的 `autogen` 框架，并集成了一系列工具和高级概念，以模仿一个高效的 AI 开发团队。

## 核心架构

MiniJules 的核心是一个由多个专业 AI 代理组成的团队，它们在一个群聊（GroupChat）环境中协同工作，以完成用户提出的复杂任务。

### 代理团队

1.  **UserProxy (用户代理)**:
    *   **角色**: 代表真实用户。
    *   **职责**: 发起任务，协调代理之间的沟通，并可以在需要时请求人工批准（Human-in-the-Loop）。

2.  **Planner (规划师)**:
    *   **角色**: 项目经理。
    *   **职责**: 接收用户的高级目标，并将其分解成一个详细、有序、可执行的步骤列表。它只负责规划，不执行任何具体操作。

3.  **Executor (执行者)**:
    *   **角色**: 软件工程师。
    *   **职责**: 接收来自 `Planner` 的单个具体任务，并调用其工具集来完成该任务。它是系统中唯一能够修改文件或执行代码的代理。

### 工作流程 (RAG-Enhanced)

MiniJules 的工作流程是一个完全自动化的“检索-增强-规划-执行-记忆”循环。

1.  **索引 (Indexing)**: 程序启动时，`indexing.py` 模块会首先扫描 `workspace/` 目录。它使用 `tree-sitter` 来解析所有支持的源文件（`.py`, `.js` 等），将代码智能地分解成函数和类等逻辑块。
2.  **检索 (Retrieval)**: 当用户提交一个任务时，系统不会立即开始规划。相反，它将任务描述作为查询，在 `ChromaDB` 向量数据库中搜索语义上最相关的代码块。
3.  **增强 (Augmentation)**: 这些检索到的、高度相关的代码示例会被自动注入到提示（Prompt）中，与原始任务合并，形成一个“增强版”的任务。
4.  **规划 (Planning)**: 这个包含了丰富上下文的增强版任务被交给 `Planner` 代理。现在，`Planner` 能够基于对现有代码的真实理解来制定一个精确、高效的计划。
5.  **执行 (Execution)**: `GroupChatManager` 按顺序将计划中的每一步交给 `Executor` 代理，后者调用工具来完成该步骤。
6.  **记忆 (Memory)**: 任务成功完成后，系统会生成一份任务摘要，并将其记录到 `minijules/memory.log` 中，为未来的学习提供基础。

### 安全沙盒

所有文件操作和代码执行都严格限制在 `minijules/workspace/` 目录内。这是通过 `tools.py` 中的一个安全层来实现的，该安全层会检查并阻止任何试图访问沙盒外部路径的尝试。

## 安装

1.  克隆或下载此仓库。
2.  确保您已安装 Python 3.8+。
3.  安装所有必需的依赖项：
    ```bash
    pip install -r minijules/requirements.txt
    ```
4.  **重要**: 本项目需要一个语言模型（LLM）API。请在 `minijules/app.py` 文件中配置您的 `config_list`，例如通过环境变量或直接填入 API 密钥。

## 如何运行

要启动系统，只需运行主应用程序：

```bash
python minijules/app.py
```

程序启动后，`UserProxy` 将自动发起在 `app.py` 中定义的示例任务，您将可以在控制台中观察到代理之间的完整交互过程。

## 未来展望

该项目的设计考虑了未来的可扩展性，包括：
*   **多语言支持**: 通过 `tree-sitter` 实现对 JavaScript, Go 等语言的结构化代码理解。
*   **RAG (检索增强生成)**: 建立代码向量索引，让代理在执行任务前能“阅读”项目中的相关代码。
*   **记忆机制**: 使代理能够从过去的任务中学习。